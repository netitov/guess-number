(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,s=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===e(s)?s:String(s)),i)}var s}var n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._slider=document.querySelector(".level__seek-slider-value"),this._sliderEndElement=document.querySelector(".level__value-end"),this._levelBtn=Array.from(document.querySelectorAll(".level__btn")),this._levelBtnInterval=[{min:700,level:this._levelBtn[2]},{min:300,level:this._levelBtn[1]},{min:100,level:this._levelBtn[0]}],this._updateLevel=t,this._level=100,this._generateNumberBtn=document.querySelector(".level__generate-btn"),this._refreshBtn=document.querySelector(".level__refresh-btn"),this._levelHandler=document.querySelector(".level"),this._randomNumber=0,this._numberSubmitted=!1,this._updateRandomNumber=n,this._generateStatus=document.querySelector(".level__generate-info")}var n,r;return n=e,(r=[{key:"_handleSeeking",value:function(e){var t=e/this._slider.max*100-5;this._slider.style.background="linear-gradient(to right, #ffd766 ".concat(t,"%, #77777754 ").concat(t,"%)"),this._sliderEndElement.value=e,this._slider.value=e;var n=Number(e);this._handleLevelBtn(n),this._updateLevel(n),this._level=n}},{key:"_clearLevelBtns",value:function(){this._levelBtn.forEach((function(e){return e.classList.remove("level__btn_active")}))}},{key:"_handleLevelBtn",value:function(e){var t;this._clearLevelBtns();var n=null===(t=this._levelBtnInterval.find((function(t){return e>=t.min})))||void 0===t?void 0:t.level;n&&n.classList.add("level__btn_active")}},{key:"_generateRandomNumber",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"_toggleELemetsActivity",value:function(e){this._slider.disabled=e,this._sliderEndElement.disabled=e,this._levelBtn.forEach((function(t){return t.disabled=e}))}},{key:"_submitNumber",value:function(){this._numberSubmitted?this.clearData():(this._randomNumber=this._generateRandomNumber(1,this._level),this._generateNumberBtn.textContent="Изменить число",this._levelHandler.classList.add("level_submitted"),this._generateStatus.textContent="Число загадано",this._toggleELemetsActivity(!0),this._numberSubmitted=!0),this._updateRandomNumber(this._randomNumber)}},{key:"clearData",value:function(){this._generateNumberBtn.textContent="Загадать число",this._levelHandler.classList.remove("level_submitted"),this._toggleELemetsActivity(!1),this._numberSubmitted=!1,this._randomNumber=0}},{key:"startOver",value:function(){this._generateStatus.textContent="Число обновлено. Попытки сброшены",this._randomNumber=this._generateRandomNumber(1,this._level),this._updateRandomNumber(this._randomNumber)}},{key:"setEventListeners",value:function(){var e=this;this._slider.addEventListener("input",(function(t){return e._handleSeeking(t.target.value)})),this._sliderEndElement.addEventListener("input",(function(t){return e._handleSeeking(t.target.value)})),this._sliderEndElement.addEventListener("blur",(function(t){var n=t.target.value;n>1e3&&e._handleSeeking(1e3),n<100&&e._handleSeeking(100)})),this._levelBtn.reverse().forEach((function(t,n){t.addEventListener("click",(function(){var t=e._levelBtnInterval[n].min;e._handleSeeking(t)}))})),this._generateNumberBtn.addEventListener("click",(function(){return e._submitNumber()})),this._refreshBtn.addEventListener("click",(function(){return e.startOver()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(s)?s:String(s)),i)}var s}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._intervalElement=document.querySelector(".answer__interval-end"),this._answerValueElement=document.querySelector(".asnwer__value"),this._submitBtn=document.querySelector(".answer__sbt-btn"),this._resultBox=document.querySelector(".answer__result-box"),this._resultText=document.querySelector(".answer__result-value"),this._level=100,this._userNumber,this._randomNumber=0,this._attempts=0,this._renderConfetti=t,this._droppGame=n}var t,n;return t=e,(n=[{key:"updateInterval",value:function(e){this._intervalElement.textContent=e,this._level=e}},{key:"updateRandomNumber",value:function(e){this._randomNumber=e,this.droppAttempts()}},{key:"droppAttempts",value:function(){this._attempts=0}},{key:"_handleResultBox",value:function(e,t){if(0===e)this._resultBox.classList.add("answer__result-box_warning","answer__result-box_active"),this._resultText.textContent='Не забудьте нажать кнопку "Загадать число"';else if(t<1||t>this._level)this._resultBox.classList.add("answer__result-box_warning","answer__result-box_active"),this._resultText.textContent="Диапазон чисел от 1 до ".concat(this._level,". Кажется, ваше число в него не попадает :(");else if(t){if(e!==t){this._resultBox.classList.add("answer__result-box_warning","answer__result-box_active");var n=e%2==0?"четное":"нечетное",r=this._attempts%3==0?". Подсказка: загаданное число - ".concat(n):"";this._resultText.textContent=t<e?"Попытка ".concat(this._attempts,": ваше число (").concat(t,") меньше загаданного").concat(r):"Попытка ".concat(this._attempts,": ваше число (").concat(t,") больше загаданного").concat(r)}else if(e===t){var i=function(e,t){if("number"!=typeof e)return new Error("Первым аргументом должно быть число");if(!Array.isArray(t)||t.length<3)return new Error("Вторым аргументом должно быть массив строк: [<слово в им.падеже>, <слово в род.падеже ед.числа>, <слово в род.падеже мн.числа>]");var n=Math.abs(e)%100,r=Math.abs(e)%10;return n>=11&&n<=14?t[2]:1===r?t[0]:r>=2&&r<=4?t[1]:t[2]}(this._attempts,["попытка","попытки","попыток"]);this._resultBox.classList.add("answer__result-box_success","answer__result-box_active"),this._resultText.textContent="Верно! Число: ".concat(e,". Вам потребовалось: ").concat(this._attempts," ").concat(i,'.\n      Чтобы начать заново - просто нажмите кнопку "Загадать число"')}}else this._resultBox.classList.add("answer__result-box_warning","answer__result-box_active"),this._resultText.textContent="Не забудьте добавить свое число в поле выше"}},{key:"clearResultBox",value:function(){this._resultBox.classList.remove("answer__result-box_warning","answer__result-box_active","answer__result-box_success"),this._resultText.textContent=""}},{key:"_submitAnswer",value:function(){this._userNumber>0&&this._randomNumber>0&&this._attempts++,this._handleResultBox(this._randomNumber,this._userNumber),this._userNumber>0&&this._userNumber===this._randomNumber&&(this._renderConfetti(),this._droppGame()),this._userNumber=void 0,this._answerValueElement.value=""}},{key:"setEventListeners",value:function(){var e=this;this._answerValueElement.addEventListener("input",(function(){var t=Number(e._answerValueElement.value);e.clearResultBox(),t>0&&t<=e._level?e._submitBtn.classList.add("answer__sbt-btn_active"):e._submitBtn.classList.remove("answer__sbt-btn_active"),e._userNumber=t})),this._submitBtn.addEventListener("click",(function(){return e._submitAnswer()}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a=document.querySelector(".confetti-container");function l(){var e=document.createElement("div");e.classList.add("confetti"),e.style.left="".concat(100*Math.random(),"%"),e.style.animationDuration="".concat(2*Math.random()+1,"s"),e.style.backgroundColor="rgb(".concat(255*Math.random(),", ").concat(255*Math.random(),", ").concat(255*Math.random(),")"),a.appendChild(e),setTimeout((function(){e.remove()}),2e3)}var o=new n((function(e){u.updateInterval(e)}),(function(e){u.updateRandomNumber(e),u.clearResultBox()})),u=new s((function(){for(var e=0;e<80;e++)setTimeout(l,2e3*Math.random())}),(function(){o.clearData()}));o.setEventListeners(),u.setEventListeners()})();